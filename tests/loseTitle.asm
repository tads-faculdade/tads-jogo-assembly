.text
main:

	lui $4, 0x1001		# posi inicial
	addi $5, $0, 256		# altura
	addi $6, $0, 512		# largura
	li $7, 0x99f0ff
	jal desenharQuadrado
	jal loseTitle
	j end

##########################################
# === Rotina para desenhar lose Title ===
#	$4: endereço de início do desenho
# Usa (sem preservar):
#	$17: endereço local dos pixels
#	$18: preto
#
# De uma linha para outra soma 512
##########################################
loseTitle:
	addi $29, $29, -4
	sw $31, 0($29)

	add $17, $0, $4 	# endereço local dos pixels
	ori $18, $0, 0x0000 	# cor local

	addi $4, $4, 516
	addi $5, $0, 13
	addi $6, $0, 5
	li $7, 0xff4b4b
	jal desenharQuadrado

	addi $4, $4, 36
	addi $5, $0, 5
	addi $6, $0, 10
	jal desenharQuadrado

	addi $4, $4, 44
	addi $5, $0, 12
	addi $6, $0, 9
	jal desenharQuadrado

	addi $4, $4, 40
	addi $5, $0, 5
	addi $6, $0, 15
	jal desenharQuadrado

	addi $4, $4, 1444
	addi $5, $0, 4
	addi $6, $0, 5
	jal desenharQuadrado

	addi $4, $4, 36
	addi $5, $0, 4
	addi $6, $0, 4
	jal desenharQuadrado

	addi $4, $4, 56
	addi $5, $0, 9
	addi $6, $0, 6
	jal desenharQuadrado

	addi $4, $4, 36
	addi $5, $0, 10
	addi $6, $0, 5
	jal desenharQuadrado

	addi $4, $4, 1912
	addi $5, $0, 5
	addi $6, $0, 15
	jal desenharQuadrado

	addi $4, $4, 112
	addi $5, $0, 5
	addi $6, $0, 5
	jal desenharQuadrado

	#sw $18, 0($17)
	sw $18, 4($17)
	sw $18, 8($17)
	sw $18, 12($17)
	sw $18, 16($17)
	sw $18, 20($17)
	# 24 - 40
	sw $18, 44($17)
	sw $18, 48($17)
	sw $18, 52($17)
	sw $18, 56($17)
	sw $18, 60($17)
	sw $18, 64($17)
	sw $18, 68($17)
	sw $18, 72($17)
	# 76 - 84
	sw $18, 88($17)
	sw $18, 92($17)
	sw $18, 96($17)
	sw $18, 100($17)
	sw $18, 104($17)
	sw $18, 108($17)
	sw $18, 112($17)
	# 116 - 124
	sw $18, 128($17)
	sw $18, 132($17)
	sw $18, 136($17)
	sw $18, 140($17)
	sw $18, 144($17)
	sw $18, 148($17)
	sw $18, 152($17)
	# 156 - 160
	sw $18, 164($17)
	sw $18, 168($17)
	sw $18, 172($17)
	sw $18, 176($17)
	#sw $18, 180($17)

	addi $17, $17, 512
	sw $18, 0($17)
	sw $18, 4($17)
	# 8 - 16
	sw $18, 20($17)
	sw $18, 24($17)
	# 28 - 36
	sw $18, 40($17)
	sw $18, 44($17)
	# 48 - 68
	sw $18, 72($17)
	sw $18, 76($17)
	#sw $18, 80($17)
	sw $18, 84($17)
	sw $18, 88($17)
	# 92 - 108
	sw $18, 112($17)
	sw $18, 116($17)
	#sw $18, 120($17)
	sw $18, 124($17)
	# 128 - 148
	sw $18, 152($17)
	sw $18, 156($17)
	sw $18, 160($17)
	# 164 - 172
	sw $18, 176($17)
	sw $18, 180($17)

	addi $17, $17, 512
	sw $18, 0($17)
	# 4 - 20
	sw $18, 24($17)
	# 28 - 32
	sw $18, 36($17)
	sw $18, 40($17)
	# 44 - 72
	sw $18, 76($17)
	sw $18, 80($17)
	sw $18, 84($17)
	# 88 - 112
	sw $18, 116($17)
	sw $18, 120($17)
	# 124 - 152
	sw $18, 156($17)
	# 160 - 176
	sw $18, 180($17)

	addi $17, $17, 512
	sw $18, 0($17)
	# 4 - 20
	sw $18, 24($17)
	# 28 - 32
	sw $18, 36($17)
	# 40 - 76
	sw $18, 80($17)
	# 84 - 116
	sw $18, 120($17)
	# 124 - 152
	sw $18, 156($17)
	# 160 - 176
	sw $18, 180($17)

	addi $17, $17, 512
	sw $18, 0($17)
	# 4 - 20
	sw $18, 24($17)
	#sw $18, 28($17)
	sw $18, 32($17)
	# 36 - 76
	sw $18, 80($17)
	# 84 - 116
	sw $18, 120($17)
	# 124 - 152
	sw $18, 156($17)
	# 160 - 176
	sw $18, 180($17)

	addi $17, $17, 512
	sw $18, 0($17)
	# 4 - 20
	sw $18, 24($17)
	#sw $18, 28($17)
	sw $18, 32($17)
	# 36 - 52
	sw $18, 56($17)
	sw $18, 60($17)
	# 64 - 76
	sw $18, 80($17)
	sw $18, 84($17)
	# 88 - 100
	sw $18, 104($17)
	sw $18, 108($17)
	#sw $18, 112($17)
	#sw $18, 116($17)
	sw $18, 120($17)
	# 124 - 132
	sw $18, 136($17)
	sw $18, 140($17)
	sw $18, 144($17)
	sw $18, 148($17)
	sw $18, 152($17)
	sw $18, 156($17)
	# 160 - 176
	sw $18, 180($17)

	addi $17, $17, 512
	sw $18, 0($17)
	# 4 - 20
	sw $18, 24($17)
	#sw $18, 28($17)
	sw $18, 32($17)
	# 36 - 48
	sw $18, 52($17)
	#sw $18, 56($17)
	#sw $18, 60($17)
	sw $18, 64($17)
	# 68 - 80
	sw $18, 84($17)
	# 88 - 100
	sw $18, 104($17)
	sw $18, 108($17)
	sw $18, 112($17)
	sw $18, 116($17)
	sw $18, 120($17)
	# 124 - 140
	sw $18, 144($17)
	#sw $18, 148($17)
	#sw $18, 152($17)
	sw $18, 156($17)
	# 160 - 176
	sw $18, 180($17)

	addi $17, $17, 512
	sw $18, 0($17)
	# 4 - 20
	sw $18, 24($17)
	sw $18, 28($17)
	sw $18, 32($17)
	sw $18, 36($17)
	sw $18, 40($17)
	#sw $18, 44($17)
	#sw $18, 48($17)
	sw $18, 52($17)
	#sw $18, 56($17)
	#sw $18, 60($17)
	sw $18, 64($17)
	# 68 - 80
	sw $18, 84($17)
	sw $18, 88($17)
	sw $18, 92($17)
	sw $18, 96($17)
	# 100 - 116
	sw $18, 120($17)
	# 124 - 140
	sw $18, 144($17)
	#sw $18, 148($17)
	#sw $18, 152($17)
	sw $18, 156($17)
	# 160 - 176
	sw $18, 180($17)

	addi $17, $17, 512
	sw $18, 0($17)
	# 4 - 36
	sw $18, 40($17)
	sw $18, 44($17)
	#sw $18, 48($17)
	#sw $18, 52($17)
	sw $18, 56($17)
	sw $18, 60($17)
	# 64 - 80
	sw $18, 84($17)
	#sw $18, 88($17)
	#sw $18, 92($17)
	sw $18, 96($17)
	# 100 - 116
	sw $18, 120($17)
	# 124 - 132
	sw $18, 136($17)
	sw $18, 140($17)
	sw $18, 144($17)
	sw $18, 148($17)
	sw $18, 152($17)
	sw $18, 156($17)
	# 160 - 176
	sw $18, 180($17)

	addi $17, $17, 512
	sw $18, 0($17)
	# 4 - 40
	sw $18, 44($17)
	# 48 - 76
	sw $18, 80($17)
	# 84 - 116
	sw $18, 120($17)
	# 124 - 152
	sw $18, 156($17)
	sw $18, 160($17)
	# 164 - 172
	sw $18, 176($17)
	#sw $18, 180($17)

	addi $17, $17, 512
	sw $18, 0($17)
	# 4 - 40
	sw $18, 44($17)
	# 48 - 76
	sw $18, 80($17)
	# 84 - 116
	sw $18, 120($17)
	# 124 - 152
	sw $18, 156($17)
	sw $18, 160($17)
	sw $18, 164($17)
	sw $18, 168($17)
	sw $18, 172($17)
	sw $18, 176($17)
	#sw $18, 180($17)

	addi $17, $17, 512
	sw $18, 0($17)
	# 4 - 40
	sw $18, 44($17)
	# 48 - 72
	sw $18, 76($17)
	sw $18, 80($17)
	# 84 - 112
	sw $18, 116($17)
	sw $18, 120($17)
	# 124 - 152
	sw $18, 156($17)
	sw $18, 160($17)
	# 164 - 172
	sw $18, 176($17)
	#sw $18, 180($17)

	addi $17, $17, 512
	sw $18, 0($17)
	sw $18, 4($17)
	# 8 - 36
	sw $18, 40($17)
	sw $18, 44($17)
	# 48 - 68
	sw $18, 72($17)
	sw $18, 76($17)
	sw $18, 80($17)
	sw $18, 84($17)
	# 88 - 108
	sw $18, 112($17)
	sw $18, 116($17)
	#sw $18, 120($17)
	sw $18, 124($17)
	# 128 - 148
	sw $18, 152($17)
	sw $18, 156($17)
	sw $18, 160($17)
	# 164 - 172
	sw $18, 176($17)
	#sw $18, 180($17)

	addi $17, $17, 512
	#sw $18, 0($17)
	sw $18, 4($17)
	sw $18, 8($17)
	sw $18, 12($17)
	sw $18, 16($17)
	sw $18, 20($17)
	sw $18, 24($17)
	sw $18, 28($17)
	sw $18, 32($17)
	sw $18, 36($17)
	sw $18, 40($17)
	#sw $18, 44($17)
	sw $18, 48($17)
	sw $18, 52($17)
	sw $18, 56($17)
	sw $18, 60($17)
	sw $18, 64($17)
	sw $18, 68($17)
	sw $18, 72($17)
	#sw $18, 76($17)
	#sw $18, 80($17)
	sw $18, 84($17)
	sw $18, 88($17)
	sw $18, 92($17)
	sw $18, 96($17)
	sw $18, 100($17)
	sw $18, 104($17)
	sw $18, 108($17)
	sw $18, 112($17)
	# 116 - 124
	sw $18, 128($17)
	sw $18, 132($17)
	sw $18, 136($17)
	sw $18, 140($17)
	sw $18, 144($17)
	sw $18, 148($17)
	sw $18, 152($17)
	#sw $18, 156($17)
	sw $18, 160($17)
	sw $18, 164($17)
	sw $18, 168($17)
	sw $18, 172($17)
	sw $18, 176($17)
	#sw $18, 180($17)

	lw   $31, 0($29)
	addi $29, $29, 4

	jr $31

##########################################
# desenharQuadrado
# Desenha um quadrado/retângulo
#
# Entradas:
# 	$4 - endereço do primeiro pixel (canto superior esquerdo)
# 	$5 - altura
# 	$6 - largura
#	$7 - cor (32 bits)
#
# Usa:
#   $8, $9, $10, $11
##########################################
desenharQuadrado:
    	add $8, $0, $4     # $8 = endereço linha atual
    	add $9, $0, $5     # $9 = contador de linhas (altura)

forQuadrado:
    	beq  $9, $0, endForQuadrado	# se altura = 0 -> fim

    	# reset largura
    	add $10, $0, $6             	# $10 = contador de colunas (largura)
    	add $11, $0, $8             	# $11 = endereço do pixel da coluna atual

forLinha:
    	beq  $10, $0, endForLinha

    	sw $7, 0($11)               	# desenha pixel (cor)
    	sw $7, 32768($11)
    	addi $11, $11, 4             	# vai 1 pixel para a direita
    	addi $10, $10, -1
    	j forLinha

endForLinha:
    	addi $8, $8, 512            	# desce 1 linha
    	addi $9, $9, -1
    	j forQuadrado

endForQuadrado:
    	jr $31

end:
	addi $2, $0, 10
	syscall
